#!/usr/bin/env bash

set -u

# ==== COLORS ====
G=$'\033[32m'
R=$'\033[31m'
C=$'\033[36m'
Y=$'\033[33m'
N=$'\033[0m'

panel_status() {
if [ -d "/var/www/pterodactyl" ]; then
echo -e "PANEL STATUS: ${G}INSTALLED âœ”${N}"
else
echo -e "PANEL STATUS: ${R}NOT INSTALLED âœ–${N}"
fi
}

header() {
clear
echo -e "${C}"
cat << "EOF"

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
   â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
   â•šâ•â•      â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•

EOF
echo -e "${Y}ðŸš€ TYRKROX_GAMER ðŸš€${N}"
echo ""
}

pause(){ read -p "Press Enter to continue..." dummy; }

# ===== PANEL MANAGER BOX =====
panel_manager() {
while true; do
clear
echo "=========================================="
echo "          PTERODACTYL MANAGER"
echo "=========================================="
panel_status
echo "------------------------------------------"
echo "[1] Install Panel        (Fresh Install)"
echo "[2] Create User          (Add Admin/User)"
echo "[3] Update Panel         (Latest Version)"
echo "[4] Change Domain + SSL"
echo "[5] Uninstall Panel"
echo ""
echo "[6] Back"
echo "=========================================="
read -p "Enter choice [1-6]: " pm

case $pm in
1) bash <(curl -s https://pterodactyl-installer.se) ;;
2) cd /var/www/pterodactyl 2>/dev/null && php artisan p:user:make ;;
3) cd /var/www/pterodactyl 2>/dev/null && php artisan p:upgrade ;;
4) bash <(curl -s https://pterodactyl-installer.se) ;;
5) rm -rf /var/www/pterodactyl && echo "Panel Removed." ;;
6) break ;;
*) echo "Invalid option!" ; sleep 2 ;;
esac
pause
done
}

# ===== MAIN MENU BOX =====
while true; do
header
echo "=========================================="
echo "               MAIN MENU"
echo "=========================================="
panel_status
echo "------------------------------------------"
echo "[1] Install Pterodactyl Panel"
echo "[2] Install Wings"
echo "[3] Panel Manager"
echo "[4] Install Proxmox (Docker)"
echo ""
echo "[5] Exit"
echo "=========================================="
read -p "Select option [1-5]: " choice

case $choice in
1)
bash <(curl -s https://pterodactyl-installer.se)
pause ;;
2)
bash <(curl -s https://pterodactyl-installer.se)
pause ;;
3)
panel_manager ;;
4)
docker run -itd \
--name proxmoxve \
--hostname pve \
--privileged \
-p 8006:8006 \
--restart unless-stopped \
rtedpro/proxmox:9.0.11
pause ;;
5)
exit 0 ;;
*)
echo "Invalid option!"
sleep 2 ;;
esac

done
